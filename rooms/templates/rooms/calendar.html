{% extends "rooms/base.html" %}
{% load static %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'rooms/css/calendar.css' %}">
{% endblock %}


{% block content %}
<!-- calendar content starts here (now it get's tricky ;)) ------------------------------------------------------------->


<div class="container-fluid p-0">
    <div class="container-fluid-content d-flex flex-column flex-md-row">
  
      <!-- Left desktop filter drawer (in mobile-mode: hidden) -->
      <aside id="filter-panel" class="d-none d-md-block col-md-3 p-3 m-1">
        <!-- filters here -->
        <h5>Filter</h5>
      </aside>
  
      <!-- Mobile filter Button (mobile only) -->
      <button class="btn btn-outline-secondary d-md-none m-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileFilterDrawer" aria-controls="mobileFilterDrawer">
        Filter
      </button>
  
      <!-- Mobile Filter Drawer (in desktop mode: hidden)-->
      <div class="offcanvas offcanvas-start" tabindex="-1" id="mobileFilterDrawer" aria-labelledby="mobileFilterDrawerLabel">
        <div class="offcanvas-header">
          <h5 id="mobileFilterDrawerLabel">Filter</h5>
          <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
          <!-- same filters here, just for mobile version -->
          <p>Filteroptionen hier...</p>
        </div>
      </div>
  
      <!-- Main calendar interface -->
      <main class="flex-fill p-3 mt-1 mb-md-1" id="calendar-interface">
        <!-- the ACTUAL calendar interface -->
        <form action="" class="d-block ms-auto me-auto">
            <input type="date" id="myDatePicker" class="btn d-block ms-auto me-auto" >
        </form>
        <!-- gridview per half an hour from 00:00 to 00:00 in one day, top to bottom-->
        <div class="calendar-wrapper">
            <div class="calendar-grid">
                <!-- First row: header -->
                <div class="calendar-time time-label"></div> <!-- leere Ecke -->
                {% for room in rooms %}
                    <div class="calendar-header">Room {{ room }}</div>
                {% endfor %}
                
                <!-- Rows: 24 hours, 2 half hours -->
                {% for hour in hours %}
                    {% for half in "0,1"|cut:"," %}  {# trick zum Split #}
                        <div class="calendar-time {% if half == '1' %}half-hour{% endif %}">
                            {% if half == '0' %}{{ hour }}:00{% endif %}
                        </div>
                        {% for room in rooms %}
                            <div class="calendar-cell {% if half == '1' %}half-hour{% endif %}">6</div>
                        {% endfor %}
                    {% endfor %}
                {% endfor %}
        
        </div>
      </main>
  
      <!-- Right SlideView (Desktop fixed right panel, Mobile Slide-Up) -->
      <!-- Desktop -->
      <aside id="slot-detail-panel" class="d-none d-md-block col-md-3 p-3 m-1">
        <h5>Details for the slot</h5>
      </aside>
  
      <!-- Mobile slide up-->
      <div id="mobile-slideup" class="d-md-none position-fixed bottom-0 start-0 w-100 slideup-container" >
        <div class="handle text-center py-2 text-white" >
            <div>
                <i class="fas fa-grip-lines me-2 "></i>
                
            </div> 
        </div>
        <div class="p-3">
          <h6>details for the slot</h6>
          <p>stuff</p>
        </div>
      </div>
  
    </div>
  </div>
<!-- calendar content ends here --------------------------------------------------------------->
 <!-- calendar.js script -->
 <script type="module" src="{% static 'rooms/js/calendar.js' %}"></script>
{% endblock %}